<!DOCTYPE html>
    <html>
    <head>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.3/css/bulma.min.css">
    </head>
    <body>

<h1 class="title">Report Data:</h1>
<div class="search-container">
  <!-- <label for="search" class="search-label">Search:</label> -->
  <br>
  <!-- <input type="text" id="search" [(ngModel)]="searchDate" (input)="filterReports()" class="search-input"> -->
</div>
<div class = "table-div">
    <table class="table is-bordered is-hoverable ">
        <tbody>
            <!-- <tr>{{newReport.id}}</tr> -->
            <tr>{{newReport.reportDate | date}}</tr>
            <tr>{{newReport.totalCapacity + "%"}}</tr>
        </tbody>
    </table>
<table class="table is-bordered is-hoverable is-fullwidth custom-table">
  <thead>
    <tr>
      <!-- <th>Report Item ID</th> -->
      <th>Product capacity (%)</th>
      <th>Product name</th>
      <th>totalAvailableCapacity</th>
      <th>Number of products in database</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of newReport.reportItems">
      <!-- <td>{{ item.id }}</td> -->
      <td>{{ item.productCapacity + "%"}}</td>
      <td>{{ item.product.productName }}</td>
      <td>{{ item.totalAvailableCapacity}}<button (click)="changeSingleProductCapacity(item)">Change</button></td>
      <td>{{ item.product.amount }}</td>
      <!-- <td><button >Update</button></td> -->
      <!-- <td><button >Delete</button></td> -->
    </tr>
  </tbody>
</table>
</div>
<div class="button-container">
  <!-- <button class="delete-button" (click)="alterModalDelete()">Delete</button> -->
  <button class="insert-button" (click)="insertReport(newReport)">Insert</button>
  <button class="is-hoverable danger" (click)="openCapacityUpdateModal()">Change Total Capacity</button>
  <button class = "is-hoverable danger" routerLink="/report/search">Search for reports...</button>
</div>

<div class = "modal is-active" *ngIf="isCapacityModal">
    <div class = "modal-background">
    <div class="modal-content has-background-white py-5 px-5">
      
        <div class="container">
          <h1 class="title">Change Product Capacity for Report</h1>
          <form>
            
            <div style="text-align: center;">
              <p>Enter new product capacity value:</p>
              <input type = "number" name = "cap-input" required 
               min="10" max="10000"
               [(ngModel)]="globalCap">
            <button class="delete-button" (click)="commitToGlobalChangeInCapacity(globalCap)">Change</button>
            <button class="button is-warning" (click)="alterCapacityModal()">Cancel</button>
          </div>

          </form>
        </div>
      </div>
      </div>
    </div>

    <div class = "modal is-active" *ngIf="isSingleChangeModal">
      <div class = "modal-background">
      <div class="modal-content has-background-white py-5 px-5">
        
          <div class="container">
            <h1 class="title">Change Product Capacity for Single Product</h1>
            <form>
              
              <div style="text-align: center;">
                <p>Enter new product capacity value:</p>
                <input type = "number" name = "cap-input" required 
                 min="1" max="10000"
                 [(ngModel)]="singleCap">
              <button class="delete-button" (click)="commitToSingleCapChange(singleCap)">Change</button>
              <button class="button is-warning" (click)="alterSingleChangeModal()">Cancel</button>
            </div>
  
            </form>
          </div>
        </div>
        </div>
      </div>